<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è - –£—Ä–æ–∫ 3: –ß–µ—Ä–µ–¥—É—é—â–∏–µ—Å—è –≥–ª–∞—Å–Ω—ã–µ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            padding: 40px;
        }

        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #f0f0f0;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .exercise {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }

        .exercise h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .exercise-description {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .question {
            background: white;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            transition: border-color 0.3s;
        }

        .question:hover {
            border-color: #667eea;
        }

        .question-text {
            margin-bottom: 10px;
            font-weight: 500;
            color: #333;
        }

        input[type="text"] {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }

        input.correct {
            border-color: #4CAF50;
            background-color: #e8f5e9;
        }

        input.incorrect {
            border-color: #f44336;
            background-color: #ffebee;
        }

        .radio-group label {
            display: block;
            padding: 10px;
            margin-bottom: 8px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .radio-group label:hover {
            background: #f5f5f5;
            border-color: #667eea;
        }

        .radio-group input[type="radio"] {
            margin-right: 10px;
        }

        .radio-group label.correct {
            background: #e8f5e9;
            border-color: #4CAF50;
        }

        .radio-group label.incorrect {
            background: #ffebee;
            border-color: #f44336;
        }

        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #e8f5e9;
            color: #2e7d32;
            border-left: 4px solid #4CAF50;
        }

        .feedback.incorrect {
            background: #ffebee;
            color: #c62828;
            border-left: 4px solid #f44336;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        button {
            flex: 1;
            min-width: 150px;
            padding: 15px 30px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .check-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .check-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .reset-btn {
            background: #757575;
            color: white;
        }

        .reset-btn:hover {
            background: #616161;
        }

        .show-answer-btn {
            background: #ff9800;
            color: white;
        }

        .show-answer-btn:hover {
            background: #f57c00;
        }

        .answer-key {
            margin-top: 20px;
            padding: 20px;
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            display: none;
        }

        .answer-key.show {
            display: block;
        }

        .answer-key h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .answer-key-content {
            color: #856404;
            line-height: 1.8;
        }

        .result-box {
            margin-top: 30px;
            padding: 30px;
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border: 2px solid #2196F3;
            border-radius: 10px;
            text-align: center;
            display: none;
        }

        .result-box.show {
            display: block;
        }

        .result-box .emoji {
            font-size: 4em;
            margin-bottom: 15px;
        }

        .result-box h3 {
            color: #0d47a1;
            margin-bottom: 15px;
        }

        .result-box .score {
            font-size: 3em;
            font-weight: bold;
            color: #1565c0;
            margin: 15px 0;
        }

        .result-box p {
            color: #1976d2;
            font-size: 1.1em;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 1.5em;
            }

            button {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìù –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è</h1>
        <p class="subtitle">–£—Ä–æ–∫ 3: –ß–µ—Ä–µ–¥—É—é—â–∏–µ—Å—è –≥–ª–∞—Å–Ω—ã–µ –≤ –∫–æ—Ä–Ω–µ —Å–ª–æ–≤–∞</p>

        <div style="display: flex; gap: 10px; justify-content: center; margin-bottom: 20px; flex-wrap: wrap;">
            <button class="check-btn" onclick="window.location.href='lesson-03-alternating-vowels.html'" style="background: #757575;">
                ‚¨ÖÔ∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ç–µ–æ—Ä–∏–∏
            </button>
            <button class="check-btn" onclick="window.location.href='../../index.html'" style="background: #2196F3;">
                üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é
            </button>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressBar">0 / 3</div>
        </div>

        <!-- –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1: –í—Å—Ç–∞–≤–∏—Ç—å –±—É–∫–≤—É -->
        <div class="exercise" id="exercise1">
            <h2>–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1: –í—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—É—é –±—É–∫–≤—É</h2>
            <p class="exercise-description">–í—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –≥–ª–∞—Å–Ω—É—é –≤ –∫–æ—Ä–Ω–µ —Å —á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ–º. –ü–æ–º–Ω–∏—Ç–µ –æ –ø—Ä–∞–≤–∏–ª–∞—Ö!</p>

            <div class="question">
                <p class="question-text">1. –ø—Ä–µ–¥–ª..–≥–∞—Ç—å</p>
                <div class="radio-group">
                    <label><input type="radio" name="q1" value="–∞"> –∞</label>
                    <label><input type="radio" name="q1" value="–±"> –æ</label>
                </div>
                <div class="feedback"></div>
            </div>

            <div class="question">
                <p class="question-text">2. –ø—Ä–∏–ª..–∂–µ–Ω–∏–µ</p>
                <div class="radio-group">
                    <label><input type="radio" name="q2" value="–∞"> –∞</label>
                    <label><input type="radio" name="q2" value="–±"> –æ</label>
                </div>
                <div class="feedback"></div>
            </div>

            <div class="question">
                <p class="question-text">3. –≤—ã—Ä..—Å—Ç–∏</p>
                <div class="radio-group">
                    <label><input type="radio" name="q3" value="–∞"> –∞</label>
                    <label><input type="radio" name="q3" value="–±"> –æ</label>
                </div>
                <div class="feedback"></div>
            </div>

            <div class="question">
                <p class="question-text">4. –≤—ã—Ä..—Å (–ø—Ä–æ—à. –≤—Ä–µ–º—è)</p>
                <div class="radio-group">
                    <label><input type="radio" name="q4" value="–∞"> –∞</label>
                    <label><input type="radio" name="q4" value="–±"> –æ</label>
                </div>
                <div class="feedback"></div>
            </div>

            <div class="question">
                <p class="question-text">5. –∑–∞–≥..—Ä–µ—Ç—å</p>
                <div class="radio-group">
                    <label><input type="radio" name="q5" value="–∞"> –∞</label>
                    <label><input type="radio" name="q5" value="–±"> –æ</label>
                </div>
                <div class="feedback"></div>
            </div>

            <div class="button-group">
                <button class="check-btn" onclick="checkExercise(1)">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                <button class="show-answer-btn" onclick="showAnswers(1)">–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç—ã</button>
                <button class="reset-btn" onclick="resetExercise(1)">–°–±—Ä–æ—Å–∏—Ç—å</button>
            </div>

            <div class="answer-key" id="answers1">
                <h4>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã:</h4>
                <div class="answer-key-content">
                    1. <strong>–∞) –ø—Ä–µ–¥–ª–ê–≥–∞—Ç—å</strong> (–ø–µ—Ä–µ–¥ –ì ‚Üí –ê)<br>
                    2. <strong>–±) –ø—Ä–∏–ª–û–∂–µ–Ω–∏–µ</strong> (–ø–µ—Ä–µ–¥ –ñ ‚Üí –û)<br>
                    3. <strong>–∞) –≤—ã—Ä–ê—Å—Ç–∏</strong> (–ø–µ—Ä–µ–¥ –°–¢ ‚Üí –ê)<br>
                    4. <strong>–±) –≤—ã—Ä–û—Å</strong> (–ø–µ—Ä–µ–¥ –° ‚Üí –û)<br>
                    5. <strong>–±) –∑–∞–≥–û—Ä–µ—Ç—å</strong> (–±–µ–∑ —É–¥–∞—Ä–µ–Ω–∏—è ‚Üí –û)
                </div>
            </div>
        </div>

        <!-- –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 2: –í—ã–±–æ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Å–ª–æ–≤–∞ -->
        <div class="exercise" id="exercise2">
            <h2>–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 2: –ö–∞–∫–æ–µ —Å–ª–æ–≤–æ –Ω–∞–ø–∏—Å–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ?</h2>
            <p class="exercise-description">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º —Å–ª–æ–≤–∞.</p>

            <div class="question">
                <p class="question-text">1. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ:</p>
                <div class="radio-group">
                    <label><input type="radio" name="q6" value="–∞"> —Å–æ–±–∏—Ä–∞—Ç—å</label>
                    <label><input type="radio" name="q6" value="–±"> —Å–æ–±–µ—Ä–∞—Ç—å</label>
                    <label><input type="radio" name="q6" value="–≤"> —Å–æ–±–∏—Ä–∞—Ç—å</label>
                </div>
                <div class="feedback"></div>
            </div>

            <div class="question">
                <p class="question-text">2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ:</p>
                <div class="radio-group">
                    <label><input type="radio" name="q7" value="–∞"> –∫–∞—Å–∞—Ç—å—Å—è</label>
                    <label><input type="radio" name="q7" value="–±"> –∫–æ—Å–∞—Ç—å—Å—è</label>
                    <label><input type="radio" name="q7" value="–≤"> –∫–∞—Å–∞—Ç—Å—è</label>
                </div>
                <div class="feedback"></div>
            </div>

            <div class="question">
                <p class="question-text">3. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ:</p>
                <div class="radio-group">
                    <label><input type="radio" name="q8" value="–∞"> –∫–æ—Å–Ω—É—Ç—å—Å—è</label>
                    <label><input type="radio" name="q8" value="–±"> –∫–∞—Å–Ω—É—Ç—å—Å—è</label>
                    <label><input type="radio" name="q8" value="–≤"> –∫–∞—Å–Ω–æ—Ç—å—Å—è</label>
                </div>
                <div class="feedback"></div>
            </div>

            <div class="question">
                <p class="question-text">4. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ:</p>
                <div class="radio-group">
                    <label><input type="radio" name="q9" value="–∞"> –∑–∞—Ä–µ–≤–æ</label>
                    <label><input type="radio" name="q9" value="–±"> –∑–æ—Ä–µ–≤–æ</label>
                    <label><input type="radio" name="q9" value="–≤"> –∑–∞—Ä–∞–≤–æ</label>
                </div>
                <div class="feedback"></div>
            </div>

            <div class="question">
                <p class="question-text">5. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ:</p>
                <div class="radio-group">
                    <label><input type="radio" name="q10" value="–∞"> –≤—ã—Ä–æ—Å—Ç–∏—Ç—å</label>
                    <label><input type="radio" name="q10" value="–±"> –≤—ã—Ä–∞—Å—Ç–∏—Ç—å</label>
                    <label><input type="radio" name="q10" value="–≤"> –≤—ã—Ä–∞—Å—Ç–∏—Ç—å</label>
                </div>
                <div class="feedback"></div>
            </div>

            <div class="button-group">
                <button class="check-btn" onclick="checkExercise(2)">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                <button class="show-answer-btn" onclick="showAnswers(2)">–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç—ã</button>
                <button class="reset-btn" onclick="resetExercise(2)">–°–±—Ä–æ—Å–∏—Ç—å</button>
            </div>

            <div class="answer-key" id="answers2">
                <h4>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã:</h4>
                <div class="answer-key-content">
                    1. <strong>–∞) —Å–æ–±–∏—Ä–∞—Ç—å</strong> (–µ—Å—Ç—å —Å—É—Ñ—Ñ–∏–∫—Å -–ê- ‚Üí –ò)<br>
                    2. <strong>–∞) –∫–∞—Å–∞—Ç—å—Å—è</strong> (–µ—Å—Ç—å —Å—É—Ñ—Ñ–∏–∫—Å -–ê- ‚Üí –ê)<br>
                    3. <strong>–∞) –∫–æ—Å–Ω—É—Ç—å—Å—è</strong> (–Ω–µ—Ç —Å—É—Ñ—Ñ–∏–∫—Å–∞ -–ê- ‚Üí –û)<br>
                    4. <strong>–∞) –∑–∞—Ä–µ–≤–æ</strong> (–ø–æ–¥ —É–¥–∞—Ä–µ–Ω–∏–µ–º ‚Üí –ê)<br>
                    5. <strong>–±) –≤—ã—Ä–∞—Å—Ç–∏—Ç—å</strong> (–ø–µ—Ä–µ–¥ –°–¢ ‚Üí –ê)
                </div>
            </div>
        </div>

        <!-- –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 3: –ù–∞–π—Ç–∏ –æ—à–∏–±–∫–∏ -->
        <div class="exercise" id="exercise3">
            <h2>–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 3: –ù–∞–π–¥–∏—Ç–µ –∏ –∏—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏</h2>
            <p class="exercise-description">–ù–∞–π–¥–∏—Ç–µ —Å–ª–æ–≤–∞ —Å –æ—à–∏–±–∫–∞–º–∏ –≤ —á–µ—Ä–µ–¥—É—é—â–∏—Ö—Å—è –∫–æ—Ä–Ω—è—Ö.</p>

            <div class="question">
                <p class="question-text">1. –ü—Ä–∏–ª–æ–≥–∞—é –¥–æ–∫—É–º–µ–Ω—Ç—ã –∫ –ø–∏—Å—å–º—É.</p>
                <div class="radio-group">
                    <label><input type="radio" name="q11" value="–∞"> –û—à–∏–±–æ–∫ –Ω–µ—Ç</label>
                    <label><input type="radio" name="q11" value="–±"> –ü—Ä–∏–ª–æ–≥–∞—é ‚Üí –ü—Ä–∏–ª–∞–≥–∞—é</label>
                    <label><input type="radio" name="q11" value="–≤"> –¥–æ–∫—É–º–µ–Ω—Ç—ã ‚Üí –¥–æ–∫—É–º–µ—Ç—ã</label>
                </div>
                <div class="feedback"></div>
            </div>

            <div class="question">
                <p class="question-text">2. –†–∞—Å—Ç–µ–Ω–∏–µ –±—ã—Å—Ç—Ä–æ –≤—ã—Ä–æ—Å—Ç–∞–µ—Ç.</p>
                <div class="radio-group">
                    <label><input type="radio" name="q12" value="–∞"> –û—à–∏–±–æ–∫ –Ω–µ—Ç</label>
                    <label><input type="radio" name="q12" value="–±"> –≤—ã—Ä–æ—Å—Ç–∞–µ—Ç ‚Üí –≤—ã—Ä–∞—Å—Ç–∞–µ—Ç</label>
                    <label><input type="radio" name="q12" value="–≤"> –†–∞—Å—Ç–µ–Ω–∏–µ ‚Üí –†–æ—Å—Ç–µ–Ω–∏–µ</label>
                </div>
                <div class="feedback"></div>
            </div>

            <div class="question">
                <p class="question-text">3. –ù—É–∂–Ω–æ –∫–æ—Å–Ω–∞—Ç—å—Å—è –≤–∞–∂–Ω–æ–π —Ç–µ–º—ã.</p>
                <div class="radio-group">
                    <label><input type="radio" name="q13" value="–∞"> –∫–æ—Å–Ω–∞—Ç—å—Å—è ‚Üí –∫–æ—Å–Ω—É—Ç—å—Å—è</label>
                    <label><input type="radio" name="q13" value="–±"> –û—à–∏–±–æ–∫ –Ω–µ—Ç</label>
                    <label><input type="radio" name="q13" value="–≤"> —Ç–µ–º—ã ‚Üí —Ç–∏–º—ã</label>
                </div>
                <div class="feedback"></div>
            </div>

            <div class="question">
                <p class="question-text">4. –ë—ã—Å—Ç—Ä–æ –∑–∞–≥–∞—Ä–µ—Ç—å—Å—è –Ω–æ–≤–æ–π –∏–¥–µ–µ–π.</p>
                <div class="radio-group">
                    <label><input type="radio" name="q14" value="–∞"> –∑–∞–≥–∞—Ä–µ—Ç—å—Å—è ‚Üí –∑–∞–≥–æ—Ä–µ—Ç—å—Å—è</label>
                    <label><input type="radio" name="q14" value="–±"> –û—à–∏–±–æ–∫ –Ω–µ—Ç</label>
                    <label><input type="radio" name="q14" value="–≤"> –∏–¥–µ–µ–π ‚Üí –∏–¥–∏–µ–π</label>
                </div>
                <div class="feedback"></div>
            </div>

            <div class="question">
                <p class="question-text">5. –ó–∞–±–µ—Ä–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ –æ—Ñ–∏—Å–∞.</p>
                <div class="radio-group">
                    <label><input type="radio" name="q15" value="–∞"> –û—à–∏–±–æ–∫ –Ω–µ—Ç</label>
                    <label><input type="radio" name="q15" value="–±"> –ó–∞–±–µ—Ä–∞—Ç—å ‚Üí –ó–∞–±–∏—Ä–∞—Ç—å</label>
                    <label><input type="radio" name="q15" value="–≤"> –æ—Ñ–∏—Å–∞ ‚Üí –∞—Ñ–∏—Å–∞</label>
                </div>
                <div class="feedback"></div>
            </div>

            <div class="button-group">
                <button class="check-btn" onclick="checkExercise(3)">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                <button class="show-answer-btn" onclick="showAnswers(3)">–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç—ã</button>
                <button class="reset-btn" onclick="resetExercise(3)">–°–±—Ä–æ—Å–∏—Ç—å</button>
            </div>

            <div class="answer-key" id="answers3">
                <h4>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã:</h4>
                <div class="answer-key-content">
                    1. <strong>–±) –ü—Ä–∏–ª–æ–≥–∞—é ‚Üí –ü—Ä–∏–ª–∞–≥–∞—é</strong> (–µ—Å—Ç—å —Å—É—Ñ—Ñ–∏–∫—Å -–ê-)<br>
                    2. <strong>–±) –≤—ã—Ä–æ—Å—Ç–∞–µ—Ç ‚Üí –≤—ã—Ä–∞—Å—Ç–∞–µ—Ç</strong> (–ø–µ—Ä–µ–¥ –°–¢ ‚Üí –ê)<br>
                    3. <strong>–∞) –∫–æ—Å–Ω–∞—Ç—å—Å—è ‚Üí –∫–æ—Å–Ω—É—Ç—å—Å—è</strong> (–Ω–µ—Ç —Å—É—Ñ—Ñ–∏–∫—Å–∞ -–ê-)<br>
                    4. <strong>–∞) –∑–∞–≥–∞—Ä–µ—Ç—å—Å—è ‚Üí –∑–∞–≥–æ—Ä–µ—Ç—å—Å—è</strong> (–±–µ–∑ —É–¥–∞—Ä–µ–Ω–∏—è ‚Üí –û)<br>
                    5. <strong>–±) –ó–∞–±–µ—Ä–∞—Ç—å ‚Üí –ó–∞–±–∏—Ä–∞—Ç—å</strong> (–µ—Å—Ç—å —Å—É—Ñ—Ñ–∏–∫—Å -–ê- ‚Üí –ò)
                </div>
            </div>
        </div>

        <!-- –ò—Ç–æ–≥–æ–≤—ã–π —Ç–µ—Å—Ç -->
        <div class="exercise" id="finalTest">
            <h2>üéì –ò—Ç–æ–≥–æ–≤—ã–π —Ç–µ—Å—Ç</h2>
            <p class="exercise-description">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è! –î–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –Ω—É–∂–Ω–æ –Ω–∞–±—Ä–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 70%.</p>

            <div class="question">
                <p class="question-text">1. –í –∫–æ—Ä–Ω–µ -–ª–æ–∂-/-–ª–∞–≥- –ø–µ—Ä–µ–¥ –ì –ø–∏—à–µ—Ç—Å—è:</p>
                <div class="radio-group">
                    <label><input type="radio" name="test1" value="–∞"> –û</label>
                    <label><input type="radio" name="test1" value="–±"> –ê</label>
                    <label><input type="radio" name="test1" value="–≤"> –ï</label>
                </div>
            </div>

            <div class="question">
                <p class="question-text">2. –í –∫–æ—Ä–Ω–µ -—Ä–æ—Å-/-—Ä–∞—Å—Ç-/-—Ä–∞—â- –ø–µ—Ä–µ–¥ –°–¢ –ø–∏—à–µ—Ç—Å—è:</p>
                <div class="radio-group">
                    <label><input type="radio" name="test2" value="–∞"> –û</label>
                    <label><input type="radio" name="test2" value="–±"> –ê</label>
                    <label><input type="radio" name="test2" value="–≤"> –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —É–¥–∞—Ä–µ–Ω–∏—è</label>
                </div>
            </div>

            <div class="question">
                <p class="question-text">3. –í –∫–æ—Ä–Ω–µ -–≥–æ—Ä-/-–≥–∞—Ä- –±–µ–∑ —É–¥–∞—Ä–µ–Ω–∏—è –ø–∏—à–µ—Ç—Å—è:</p>
                <div class="radio-group">
                    <label><input type="radio" name="test3" value="–∞"> –ê</label>
                    <label><input type="radio" name="test3" value="–±"> –û</label>
                    <label><input type="radio" name="test3" value="–≤"> –ï</label>
                </div>
            </div>

            <div class="question">
                <p class="question-text">4. –ï—Å–ª–∏ –ø–æ—Å–ª–µ –∫–æ—Ä–Ω—è –µ—Å—Ç—å —Å—É—Ñ—Ñ–∏–∫—Å -–ê-, –≤ –∫–æ—Ä–Ω–µ -–±–∏—Ä-/-–±–µ—Ä- –ø–∏—à–µ—Ç—Å—è:</p>
                <div class="radio-group">
                    <label><input type="radio" name="test4" value="–∞"> –ï</label>
                    <label><input type="radio" name="test4" value="–±"> –ò</label>
                    <label><input type="radio" name="test4" value="–≤"> –ê</label>
                </div>
            </div>

            <div class="question">
                <p class="question-text">5. –£–∫–∞–∂–∏—Ç–µ —Å–ª–æ–≤–æ —Å –æ—à–∏–±–∫–æ–π:</p>
                <div class="radio-group">
                    <label><input type="radio" name="test5" value="–∞"> –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å</label>
                    <label><input type="radio" name="test5" value="–±"> –ø—Ä–∏–ª–æ–≥–∞—Ç—å</label>
                    <label><input type="radio" name="test5" value="–≤"> –∏–∑–ª–æ–∂–µ–Ω–∏–µ</label>
                </div>
            </div>

            <div class="question">
                <p class="question-text">6. –£–∫–∞–∂–∏—Ç–µ —Å–ª–æ–≤–æ —Å –æ—à–∏–±–∫–æ–π:</p>
                <div class="radio-group">
                    <label><input type="radio" name="test6" value="–∞"> –≤—ã—Ä–∞—Å—Ç–∏—Ç—å</label>
                    <label><input type="radio" name="test6" value="–±"> –∑–∞—Ä–æ—Å–ª–∏</label>
                    <label><input type="radio" name="test6" value="–≤"> –≤—ã—Ä–æ—Å—Ç–∏—Ç—å</label>
                </div>
            </div>

            <div class="question">
                <p class="question-text">7. –ö–∞–∫–æ–µ —Å–ª–æ–≤–æ —è–≤–ª—è–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º?</p>
                <div class="radio-group">
                    <label><input type="radio" name="test7" value="–∞"> —Ä–∞—Å—Ç–µ–Ω–∏–µ</label>
                    <label><input type="radio" name="test7" value="–±"> —Ä–æ—Å—Ç–æ–∫</label>
                    <label><input type="radio" name="test7" value="–≤"> –∑–∞—Ä–æ—Å–ª–∏</label>
                </div>
            </div>

            <div class="question">
                <p class="question-text">8. –í –∫–∞–∫–æ–º —Å–ª–æ–≤–µ –ø–∏—à–µ—Ç—Å—è –ò?</p>
                <div class="radio-group">
                    <label><input type="radio" name="test8" value="–∞"> –∑–∞–ø..—Ä–µ—Ç—å (–¥–≤–µ—Ä—å)</label>
                    <label><input type="radio" name="test8" value="–±"> –∑–∞–ø..—Ä–∞—Ç—å (–¥–≤–µ—Ä—å)</label>
                    <label><input type="radio" name="test8" value="–≤"> –∑–∞–ø..—Ä</label>
                </div>
            </div>

            <div class="question">
                <p class="question-text">9. –í –∫–∞–∫–æ–º —Å–ª–æ–≤–µ –ø–∏—à–µ—Ç—Å—è –ê?</p>
                <div class="radio-group">
                    <label><input type="radio" name="test9" value="–∞"> –∫..—Å–Ω—É—Ç—å—Å—è</label>
                    <label><input type="radio" name="test9" value="–±"> –∫..—Å–∞—Ç—å—Å—è</label>
                    <label><input type="radio" name="test9" value="–≤"> –∫..—Å–Ω—É–ª—Å—è</label>
                </div>
            </div>

            <div class="question">
                <p class="question-text">10. –ö–æ—Ä–µ–Ω—å -–∑–æ—Ä-/-–∑–∞—Ä- –∑–∞–≤–∏—Å–∏—Ç –æ—Ç:</p>
                <div class="radio-group">
                    <label><input type="radio" name="test10" value="–∞"> –°–ª–µ–¥—É—é—â–µ–π —Å–æ–≥–ª–∞—Å–Ω–æ–π</label>
                    <label><input type="radio" name="test10" value="–±"> –£–¥–∞—Ä–µ–Ω–∏—è</label>
                    <label><input type="radio" name="test10" value="–≤"> –°—É—Ñ—Ñ–∏–∫—Å–∞ -–ê-</label>
                </div>
            </div>

            <div class="button-group">
                <button class="check-btn" onclick="checkFinalTest()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ—Å—Ç</button>
                <button class="reset-btn" onclick="resetExercise('final')">–°–±—Ä–æ—Å–∏—Ç—å</button>
            </div>

            <div class="result-box" id="resultBox"></div>
        </div>
    </div>

    <script type="module">
        import { AuthService } from '../../src/firebase/services/authService.js';
        import { ExerciseService } from '../../src/firebase/services/exerciseService.js';
        import SkillsService from '../../src/firebase/services/skillsService.js';

        const totalExercises = 3;
        let completedExercises = 0;

        const exercise1Answers = { q1: '–∞', q2: '–±', q3: '–∞', q4: '–±', q5: '–±' };
        const exercise2Answers = { q6: '–∞', q7: '–∞', q8: '–∞', q9: '–∞', q10: '–±' };
        const exercise3Answers = { q11: '–±', q12: '–±', q13: '–∞', q14: '–∞', q15: '–±' };
        const testAnswers = { 
            test1: '–±', test2: '–±', test3: '–±', test4: '–±', test5: '–±',
            test6: '–≤', test7: '–±', test8: '–±', test9: '–±', test10: '–±'
        };

        function updateProgress() {
            const progressBar = document.getElementById('progressBar');
            progressBar.textContent = `${completedExercises} / ${totalExercises}`;
            progressBar.style.width = `${(completedExercises / totalExercises) * 100}%`;
        }

        window.checkExercise = function(exerciseNum) {
            if (exerciseNum === 1) {
                checkRadioExercise('exercise1', exercise1Answers, 1);
            } else if (exerciseNum === 2) {
                checkRadioExercise('exercise2', exercise2Answers, 2);
            } else if (exerciseNum === 3) {
                checkRadioExercise('exercise3', exercise3Answers, 3);
            }
        };

        function checkRadioExercise(exerciseId, answers, exerciseNum) {
            const questions = document.querySelectorAll(`#${exerciseId} .question`);
            let correct = 0;

            questions.forEach((question, index) => {
                const radios = question.querySelectorAll('input[type="radio"]');
                const feedback = question.querySelector('.feedback');
                let selected = null;

                radios.forEach(radio => {
                    if (radio.checked) {
                        selected = radio.value;
                    }
                    radio.parentElement.classList.remove('correct', 'incorrect');
                });

                if (!selected) {
                    feedback.className = 'feedback incorrect show';
                    feedback.textContent = '‚ö† –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞';
                    return;
                }

                const correctAnswer = answers[radios[0].name];

                radios.forEach(radio => {
                    if (radio.value === correctAnswer) {
                        radio.parentElement.classList.add('correct');
                    } else if (radio.checked) {
                        radio.parentElement.classList.add('incorrect');
                    }
                });

                if (selected === correctAnswer) {
                    feedback.className = 'feedback correct show';
                    feedback.textContent = '‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ!';
                    correct++;
                } else {
                    feedback.className = 'feedback incorrect show';
                    feedback.textContent = '‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ';
                }
            });

            if (correct === questions.length) {
                completedExercises = Math.max(completedExercises, exerciseNum);
                updateProgress();
            }
        }

        window.showAnswers = function(exerciseNum) {
            document.getElementById('answers' + exerciseNum).classList.add('show');
        };

        window.resetExercise = function(exerciseNum) {
            if (exerciseNum === 'final') {
                const questions = document.querySelectorAll('#finalTest .question');
                questions.forEach(question => {
                    const radios = question.querySelectorAll('input[type="radio"]');
                    radios.forEach(radio => {
                        radio.checked = false;
                        radio.parentElement.classList.remove('correct', 'incorrect');
                    });
                });
                document.getElementById('resultBox').classList.remove('show');
            } else {
                const exercise = document.getElementById('exercise' + exerciseNum);
                const inputs = exercise.querySelectorAll('input');
                const feedbacks = exercise.querySelectorAll('.feedback');
                const answerKey = document.getElementById('answers' + exerciseNum);

                inputs.forEach(input => {
                    if (input.type === 'text') {
                        input.value = '';
                        input.classList.remove('correct', 'incorrect');
                    } else if (input.type === 'radio') {
                        input.checked = false;
                        input.parentElement.classList.remove('correct', 'incorrect');
                    }
                });

                feedbacks.forEach(feedback => {
                    feedback.classList.remove('show');
                });

                if (answerKey) {
                    answerKey.classList.remove('show');
                }
            }
        };

        window.checkFinalTest = async function() {
            const questions = document.querySelectorAll('#finalTest .question');
            let correct = 0;
            let answered = 0;

            questions.forEach((question, index) => {
                const radios = question.querySelectorAll('input[type="radio"]');
                let selected = null;

                radios.forEach(radio => {
                    if (radio.checked) {
                        selected = radio.value;
                        answered++;
                    }
                    radio.parentElement.classList.remove('correct', 'incorrect');
                });

                if (selected) {
                    const correctAnswer = testAnswers[radios[0].name];

                    radios.forEach(radio => {
                        if (radio.value === correctAnswer) {
                            radio.parentElement.classList.add('correct');
                        } else if (radio.checked) {
                            radio.parentElement.classList.add('incorrect');
                        }
                    });

                    if (selected === correctAnswer) {
                        correct++;
                    }
                }
            });

            if (answered < questions.length) {
                alert('‚ö†Ô∏è –û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π!');
                return;
            }

            const percentage = Math.round((correct / questions.length) * 100);
            const passed = percentage >= 70;

            const resultBox = document.getElementById('resultBox');
            resultBox.className = 'result-box show';
            resultBox.innerHTML = `
                <div class="emoji">${passed ? 'üéâ' : 'üòî'}</div>
                <h3>${passed ? '–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!' : '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑'}</h3>
                <div class="score">${correct} / ${questions.length}</div>
                <p>–ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: <strong>${percentage}%</strong></p>
                <p>${passed 
                    ? '–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! –í—ã —É—Å–ø–µ—à–Ω–æ –æ—Å–≤–æ–∏–ª–∏ —Ç–µ–º—É —á–µ—Ä–µ–¥—É—é—â–∏—Ö—Å—è –≥–ª–∞—Å–Ω—ã—Ö!' 
                    : '–î–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –Ω—É–∂–Ω–æ –Ω–∞–±—Ä–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 70%. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.'
                }</p>
            `;

            if (passed) {
                completedExercises = totalExercises;
                updateProgress();

                try {
                    const user = AuthService.getCurrentUser();
                    if (user) {
                        await ExerciseService.saveResult(user.uid, 'exercise-03-alternating-vowels', {
                            score: percentage,
                            answers: [],
                            mistakes: []
                        });

                        await SkillsService.updateSkillProgress(user.uid, 'alternating-vowels', correct, questions.length);
                        
                        try {
                            const channel = new BroadcastChannel('skills-update');
                            channel.postMessage({
                                type: 'SKILL_UPDATED',
                                skillId: 'alternating-vowels',
                                userId: user.uid,
                                timestamp: Date.now()
                            });
                            channel.close();
                        } catch (e) {
                            console.log('BroadcastChannel –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è:', e);
                        }
                        
                        resultBox.innerHTML += `
                            <div style="margin-top: 15px; padding: 10px; background: #e8f5e9; border-radius: 5px; color: #2e7d32;">
                                ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω! –ù–∞–≤—ã–∫ "–ß–µ—Ä–µ–¥—É—é—â–∏–µ—Å—è –≥–ª–∞—Å–Ω—ã–µ" –æ–±–Ω–æ–≤–ª—ë–Ω.
                            </div>
                            <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                                <button class="check-btn" onclick="window.location.href='lesson-03-alternating-vowels.html'" style="background: #757575; padding: 10px 20px; border: none; border-radius: 8px; color: white; font-weight: 600; cursor: pointer;">
                                    ‚¨ÖÔ∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ç–µ–æ—Ä–∏–∏
                                </button>
                                <button class="check-btn" onclick="window.location.href='../../index.html'" style="background: #4caf50; padding: 10px 20px; border: none; border-radius: 8px; color: white; font-weight: 600; cursor: pointer;">
                                    üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é
                                </button>
                            </div>
                        `;
                    }
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', error);
                }
            } else {
                resultBox.innerHTML += `
                    <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                        <button class="check-btn" onclick="resetExercise('final')" style="background: #ff9800; padding: 10px 20px; border: none; border-radius: 8px; color: white; font-weight: 600; cursor: pointer;">
                            üîÑ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
                        </button>
                        <button class="check-btn" onclick="window.location.href='lesson-03-alternating-vowels.html'" style="background: #757575; padding: 10px 20px; border: none; border-radius: 8px; color: white; font-weight: 600; cursor: pointer;">
                            üìñ –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ç–µ–æ—Ä–∏–∏
                        </button>
                    </div>
                `;
            }

            resultBox.scrollIntoView({ behavior: 'smooth', block: 'center' });
        };

        updateProgress();
    </script>
</body>
</html>
